<style> body {margin: 0;} </style>
<script type="importmap">
  {
    "imports": {
      "three": "https://cdnjs.cloudflare.com/ajax/libs/three.js/0.174.0/three.module.js",
      "@sparkjsdev/spark": "https://sparkjs.dev/releases/spark/0.1.6/spark.module.js",
      "three/addons/": "https://unpkg.com/three@0.174.0/examples/jsm/"
    }
  }
</script>
<script type="module">
  import * as THREE from "three";
  import { SplatMesh } from "@sparkjsdev/spark";
  import { OrbitControls } from "three/addons/controls/OrbitControls.js";

  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
  camera.position.set(0, 0, 5);
  const renderer = new THREE.WebGLRenderer();
  renderer.setSize(window.innerWidth, window.innerHeight);
  document.body.appendChild(renderer.domElement)

  const splatURL = "point_cloud.ply";
  const wenwu = new SplatMesh({ url: splatURL });
  wenwu.quaternion.set(1, 0, 0, 0);
  wenwu.position.set(0, 0, -3);
  scene.add(wenwu);

  const controls = new OrbitControls(camera, renderer.domElement);
  controls.rotateSpeed = -1; // 反转旋转方向
  controls.enableDamping = true; // 平滑阻尼
  controls.dampingFactor = 0.05;
  controls.screenSpacePanning = false;
  controls.minDistance = 1;
  controls.maxDistance = 500;

  renderer.setAnimationLoop(function animate(time) {
    controls.update();
    renderer.render(scene, camera);
    wenwu.rotation.y += 0.01;
  });
</script>
